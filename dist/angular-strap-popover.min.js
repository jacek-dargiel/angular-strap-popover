/**
 * angular-strap-popover
 * @version v2.1.3 - 2014-11-19
 * @link http://mgcrea.github.io/angular-strap
 * @author Olivier Louvignes (olivier@mg-crea.com)
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
!function(t,e){"use strict";angular.module("mgcrea.ngStrap",["mgcrea.ngStrap.tooltip","mgcrea.ngStrap.popover"]),angular.module("mgcrea.ngStrap.helpers.debounce",[]).factory("debounce",["$timeout",function(t){return function(e,n,o){var i=null;return function(){var a=this,r=arguments,l=o&&!i;return i&&t.cancel(i),i=t(function(){i=null,o||e.apply(a,r)},n,!1),l&&e.apply(a,r),i}}}]).factory("throttle",["$timeout",function(t){return function(e,n,o){var i=null;return o||(o={}),function(){var a=this,r=arguments;i||(o.leading!==!1&&e.apply(a,r),i=t(function(){i=null,o.trailing!==!1&&e.apply(a,r)},n,!1))}}}]),angular.module("mgcrea.ngStrap.helpers.dimensions",[]).factory("dimensions",["$document","$window",function(){var e=(angular.element,{}),n=e.nodeName=function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()};e.css=function(e,n,o){var i;return i=e.currentStyle?e.currentStyle[n]:t.getComputedStyle?t.getComputedStyle(e)[n]:e.style[n],o===!0?parseFloat(i)||0:i},e.offset=function(e){var n=e.getBoundingClientRect(),o=e.ownerDocument;return{width:n.width||e.offsetWidth,height:n.height||e.offsetHeight,top:n.top+(t.pageYOffset||o.documentElement.scrollTop)-(o.documentElement.clientTop||0),left:n.left+(t.pageXOffset||o.documentElement.scrollLeft)-(o.documentElement.clientLeft||0)}},e.position=function(t){var i,a,r={top:0,left:0};return"fixed"===e.css(t,"position")?a=t.getBoundingClientRect():(i=o(t),a=e.offset(t),n(i,"html")||(r=e.offset(i)),r.top+=e.css(i,"borderTopWidth",!0),r.left+=e.css(i,"borderLeftWidth",!0)),{width:t.offsetWidth,height:t.offsetHeight,top:a.top-r.top-e.css(t,"marginTop",!0),left:a.left-r.left-e.css(t,"marginLeft",!0)}};var o=function(t){var o=t.ownerDocument,i=t.offsetParent||o;if(n(i,"#document"))return o.documentElement;for(;i&&!n(i,"html")&&"static"===e.css(i,"position");)i=i.offsetParent;return i||o.documentElement};return e.height=function(t,n){var o=t.offsetHeight;return n?o+=e.css(t,"marginTop",!0)+e.css(t,"marginBottom",!0):o-=e.css(t,"paddingTop",!0)+e.css(t,"paddingBottom",!0)+e.css(t,"borderTopWidth",!0)+e.css(t,"borderBottomWidth",!0),o},e.width=function(t,n){var o=t.offsetWidth;return n?o+=e.css(t,"marginLeft",!0)+e.css(t,"marginRight",!0):o-=e.css(t,"paddingLeft",!0)+e.css(t,"paddingRight",!0)+e.css(t,"borderLeftWidth",!0)+e.css(t,"borderRightWidth",!0),o},e}]),angular.version.minor<3&&angular.version.dot<14&&angular.module("ng").factory("$$rAF",["$window","$timeout",function(t,e){var n=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame,o=t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.mozCancelAnimationFrame||t.webkitCancelRequestAnimationFrame,i=!!n,a=i?function(t){var e=n(t);return function(){o(e)}}:function(t){var n=e(t,16.66,!1);return function(){e.cancel(n)}};return a.supported=i,a}]),angular.module("mgcrea.ngStrap.popover",["mgcrea.ngStrap.tooltip"]).provider("bsPopover",function(){var t=this.defaults={animation:"am-fade",customClass:"",container:!1,target:!1,placement:"right",template:"popover/popover.tpl.html",contentTemplate:!1,trigger:"click",keyboard:!0,html:!1,title:"",content:"",delay:0,autoClose:!1};this.$get=["bsTooltip",function(e){function n(n,o){var i=angular.extend({},t,o),a=e(n,i);return i.content&&(a.$scope.content=i.content),a}return n}]}).directive("bsPopover",["$window","$sce","bsPopover",function(t,e,n){var o=t.requestAnimationFrame||t.setTimeout;return{restrict:"EAC",scope:!0,link:function(t,i,a){var r={scope:t};angular.forEach(["template","contentTemplate","placement","container","target","delay","trigger","keyboard","html","animation","customClass","autoClose"],function(t){angular.isDefined(a[t])&&(r[t]=a[t])}),angular.forEach(["title","content"],function(n){a[n]&&a.$observe(n,function(i,a){t[n]=e.trustAsHtml(i),angular.isDefined(a)&&o(function(){l&&l.$applyPlacement()})})}),a.bsPopover&&t.$watch(a.bsPopover,function(e,n){angular.isObject(e)?angular.extend(t,e):t.content=e,angular.isDefined(n)&&o(function(){l&&l.$applyPlacement()})},!0),a.bsShow&&t.$watch(a.bsShow,function(t){l&&angular.isDefined(t)&&(angular.isString(t)&&(t=!!t.match(/true|,?(popover),?/i)),t===!0?l.show():l.hide())});var l=n(i,r);t.$on("$destroy",function(){l&&l.destroy(),r=null,l=null}),t.$on("popover:hide",function(){l.hide()})}}}]),angular.module("mgcrea.ngStrap.tooltip",["mgcrea.ngStrap.helpers.dimensions"]).provider("bsTooltip",function(){var t=this.defaults={animation:"am-fade",customClass:"",prefixClass:"tooltip",prefixEvent:"tooltip",container:!1,target:!1,placement:"top",template:"tooltip/tooltip.tpl.html",contentTemplate:!1,trigger:"hover focus",keyboard:!1,html:!1,show:!1,title:"",type:"",delay:0,autoClose:!1,bsEnabled:!0};this.$get=["$window","$rootScope","$compile","$q","$templateCache","$http","$animate","dimensions","$$rAF","$timeout",function(n,o,i,a,r,l,s,u,c,f){function p(e,n){function a(){A.$emit(P.prefixEvent+".show",D)}function r(){return A.$emit(P.prefixEvent+".hide",D),U&&"focus"===P.trigger?e[0].blur():void T()}function l(){var t=P.trigger.split(" ");angular.forEach(t,function(t){"click"===t?e.on("click",D.toggle):"manual"!==t&&(e.on("hover"===t?"mouseenter":"focus",D.enter),e.on("hover"===t?"mouseleave":"blur",D.leave),"button"===F&&"hover"!==t&&e.on(h?"touchstart":"mousedown",D.$onFocusElementMouseDown))})}function p(){for(var t=P.trigger.split(" "),n=t.length;n--;){var o=t[n];"click"===o?e.off("click",D.toggle):"manual"!==o&&(e.off("hover"===o?"mouseenter":"focus",D.enter),e.off("hover"===o?"mouseleave":"blur",D.leave),"button"===F&&"hover"!==o&&e.off(h?"touchstart":"mousedown",D.$onFocusElementMouseDown))}}function b(){"focus"!==P.trigger?R.on("keyup",D.$onKeyUp):e.on("keyup",D.$onFocusKeyUp)}function w(){"focus"!==P.trigger?R.off("keyup",D.$onKeyUp):e.off("keyup",D.$onFocusKeyUp)}function y(){f(function(){R.on("click",C),v.on("click",D.hide),B=!0},0,!1)}function S(){B&&(R.off("click",C),v.off("click",D.hide),B=!1)}function C(t){t.stopPropagation()}function k(){return"body"===P.container?u.offset(P.target[0]||e[0]):u.position(P.target[0]||e[0])}function E(t,e,n,o){var i,a=t.split("-");switch(a[0]){case"right":i={top:e.top+e.height/2-o/2,left:e.left+e.width};break;case"bottom":i={top:e.top+e.height,left:e.left+e.width/2-n/2};break;case"left":i={top:e.top+e.height/2-o/2,left:e.left-n};break;default:i={top:e.top-o,left:e.left+e.width/2-n/2}}if(!a[1])return i;if("top"===a[0]||"bottom"===a[0])switch(a[1]){case"left":i.left=e.left;break;case"right":i.left=e.left+e.width-n}else if("left"===a[0]||"right"===a[0])switch(a[1]){case"top":i.top=e.top-o;break;case"bottom":i.top=e.top+e.height}return i}function T(){clearTimeout(L),D.$isShown&&null!==R&&(P.autoClose&&S(),P.keyboard&&w()),K&&(K.$destroy(),K=null),R&&(R.remove(),R=D.$element=null)}var D={},F=e[0].nodeName.toLowerCase(),P=D.$options=angular.extend({},t,n);D.$promise=m(P.template);var A=D.$scope=P.scope&&P.scope.$new()||o.$new();if(P.delay&&angular.isString(P.delay)){var x=P.delay.split(",").map(parseFloat);P.delay=x.length>1?{show:x[0],hide:x[1]}:x[0]}P.title&&(D.$scope.title=P.title),A.$setEnabled=function(t){A.$$postDigest(function(){D.setEnabled(t)})},A.$hide=function(){A.$$postDigest(function(){D.hide()})},A.$show=function(){A.$$postDigest(function(){D.show()})},A.$toggle=function(){A.$$postDigest(function(){D.toggle()})},D.$isShown=A.$isShown=!1;var L,W;P.contentTemplate&&(D.$promise=D.$promise.then(function(t){var e=angular.element(t);return m(P.contentTemplate).then(function(t){var n=d('[ng-bind="content"]',e[0]);return n.length||(n=d('[ng-bind="title"]',e[0])),n.removeAttr("ng-bind").html(t),e[0].outerHTML})}));var O,R,q,H,K;D.$promise.then(function(t){angular.isObject(t)&&(t=t.data),P.html&&(t=t.replace($,'ng-bind-html="')),t=g.apply(t),q=t,O=i(t),D.init()}),D.init=function(){P.delay&&angular.isNumber(P.delay)&&(P.delay={show:P.delay,hide:P.delay}),"self"===P.container?H=e:angular.isElement(P.container)?H=P.container:P.container&&(H=d(P.container)),l(),P.target&&(P.target=angular.isElement(P.target)?P.target:d(P.target)),P.show&&A.$$postDigest(function(){"focus"===P.trigger?e[0].focus():D.show()})},D.destroy=function(){p(),T(),A.$destroy()},D.enter=function(){return clearTimeout(L),W="in",P.delay&&P.delay.show?void(L=setTimeout(function(){"in"===W&&D.show()},P.delay.show)):D.show()},D.show=function(){if(P.bsEnabled){A.$emit(P.prefixEvent+".show.before",D);var t,n;P.container?(t=H,n=H[0].lastChild?angular.element(H[0].lastChild):null):(t=null,n=e),R&&T(),K=D.$scope.$new(),R=D.$element=O(K,function(){}),R.css({top:"-9999px",left:"-9999px",display:"block",visibility:"hidden"}).addClass(P.placement),P.animation&&R.addClass(P.animation),P.type&&R.addClass(P.prefixClass+"-"+P.type),P.customClass&&R.addClass(P.customClass);var o=s.enter(R,t,n,a);o&&o.then&&o.then(a),D.$isShown=A.$isShown=!0,A.$$phase||A.$root&&A.$root.$$phase||A.$digest(),c(function(){D.$applyPlacement(),R&&R.css({visibility:"visible"})}),P.keyboard&&("focus"!==P.trigger&&D.focus(),b()),P.autoClose&&y()}},D.leave=function(){return clearTimeout(L),W="out",P.delay&&P.delay.hide?void(L=setTimeout(function(){"out"===W&&D.hide()},P.delay.hide)):D.hide()};var U;D.hide=function(t){if(D.$isShown){A.$emit(P.prefixEvent+".hide.before",D),U=t;var e=s.leave(R,r);e&&e.then&&e.then(r),D.$isShown=A.$isShown=!1,A.$$phase||A.$root&&A.$root.$$phase||A.$digest(),P.keyboard&&null!==R&&w(),P.autoClose&&null!==R&&S()}},D.toggle=function(){D.$isShown?D.leave():D.enter()},D.focus=function(){R[0].focus()},D.setEnabled=function(t){P.bsEnabled=t},D.$applyPlacement=function(){if(R){var t=k(),e=R.prop("offsetWidth"),n=R.prop("offsetHeight"),o=E(P.placement,t,e,n);o.top+="px",o.left+="px",R.css(o)}},D.$onKeyUp=function(t){27===t.which&&D.$isShown&&(D.hide(),t.stopPropagation())},D.$onFocusKeyUp=function(t){27===t.which&&(e[0].blur(),t.stopPropagation())},D.$onFocusElementMouseDown=function(t){t.preventDefault(),t.stopPropagation(),D.$isShown?e[0].blur():e[0].focus()};var B=!1;return D}function d(t,n){return angular.element((n||e).querySelectorAll(t))}function m(t){return a.when(r.get(t)||l.get(t)).then(function(e){return angular.isObject(e)?(r.put(t,e.data),e.data):e})}var g=String.prototype.trim,h="createTouch"in n.document,$=/ng-bind="/gi,v=angular.element(n.document);return p}]}).directive("bsTooltip",["$window","$location","$sce","bsTooltip","$$rAF",function(t,e,n,o,i){return{restrict:"EAC",scope:!0,link:function(t,e,a){var r={scope:t};angular.forEach(["template","contentTemplate","placement","container","target","delay","trigger","keyboard","html","animation","type","customClass"],function(t){angular.isDefined(a[t])&&(r[t]=a[t])}),t.hasOwnProperty("title")||(t.title=""),a.$observe("title",function(e){if(angular.isDefined(e)||!t.hasOwnProperty("title")){var o=t.title;t.title=n.trustAsHtml(e),angular.isDefined(o)&&i(function(){l&&l.$applyPlacement()})}}),a.bsTooltip&&t.$watch(a.bsTooltip,function(e,n){angular.isObject(e)?angular.extend(t,e):t.title=e,angular.isDefined(n)&&i(function(){l&&l.$applyPlacement()})},!0),a.bsShow&&t.$watch(a.bsShow,function(t){l&&angular.isDefined(t)&&(angular.isString(t)&&(t=!!t.match(/true|,?(tooltip),?/i)),t===!0?l.show():l.hide())}),a.bsEnabled&&t.$watch(a.bsEnabled,function(t){l&&angular.isDefined(t)&&(angular.isString(t)&&(t=!!t.match(/true|1|,?(tooltip),?/i)),l.setEnabled(t===!1?!1:!0))});var l=o(e,r);t.$on("$destroy",function(){l&&l.destroy(),r=null,l=null})}}}])}(window,document);
//# sourceMappingURL=angular-strap-popover.min.js.map